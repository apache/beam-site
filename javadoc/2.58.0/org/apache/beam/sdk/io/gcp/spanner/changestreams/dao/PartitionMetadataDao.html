<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- GitHub action javadoc-cleanup -->
<link rel="canonical" href="https://beam.apache.org/releases/javadoc/current/org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- End javadoc-cleanup block -->
<!-- Generated by javadoc -->
<title>PartitionMetadataDao (Apache Beam 2.58.0)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PartitionMetadataDao (Apache Beam 2.58.0)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../../index.html?org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html" target="_top">Frames</a></li>
<li><a href="PartitionMetadataDao.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.beam.sdk.io.gcp.spanner.changestreams.dao</div>
<h2 title="Class PartitionMetadataDao" class="title">Class PartitionMetadataDao</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.beam.sdk.io.gcp.spanner.changestreams.dao.PartitionMetadataDao</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PartitionMetadataDao</span>
extends java.lang.Object</pre>
<div class="block">Data access object for the Connector metadata tables.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.InTransactionContext</a></span></code>
<div class="block">Represents the execution of a read / write transaction in Cloud Spanner.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.TransactionResult</a>&lt;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="type parameter in PartitionMetadataDao.TransactionResult">T</a>&gt;</span></code>
<div class="block">Represents a result from executing a Cloud Spanner read / write transaction.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#countPartitionsCreatedAfter-com.google.cloud.Timestamp-">countPartitionsCreatedAfter</a></span>(com.google.cloud.Timestamp&nbsp;timestamp)</code>
<div class="block">Counts all partitions with a <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_CREATED_AT"><code>PartitionMetadataAdminDao.COLUMN_CREATED_AT</code></a> less than the
 given timestamp.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>com.google.cloud.spanner.ResultSet</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#getAllPartitionsCreatedAfter-com.google.cloud.Timestamp-">getAllPartitionsCreatedAfter</a></span>(com.google.cloud.Timestamp&nbsp;timestamp)</code>
<div class="block">Fetches all partitions with a <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_CREATED_AT"><code>PartitionMetadataAdminDao.COLUMN_CREATED_AT</code></a> less than the
 given timestamp.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>com.google.cloud.spanner.Struct</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#getPartition-java.lang.String-">getPartition</a></span>(java.lang.String&nbsp;partitionToken)</code>
<div class="block">Fetches the partition metadata row data for the given partition token.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>com.google.cloud.Timestamp</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#getUnfinishedMinWatermark--">getUnfinishedMinWatermark</a></span>()</code>
<div class="block">Fetches the earliest partition watermark from the partition metadata table that is not in a
 <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#FINISHED"><code>PartitionMetadata.State.FINISHED</code></a> state.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>com.google.cloud.Timestamp</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#insert-org.apache.beam.sdk.io.gcp.spanner.changestreams.model.PartitionMetadata-">insert</a></span>(<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.model">PartitionMetadata</a>&nbsp;row)</code>
<div class="block">Inserts the partition metadata.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.TransactionResult</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#runInTransaction-java.util.function.Function-">runInTransaction</a></span>(java.util.function.Function&lt;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.InTransactionContext</a>,T&gt;&nbsp;callable)</code>
<div class="block">Runs a given function in a transaction context.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.TransactionResult</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#runInTransaction-java.util.function.Function-java.lang.String-">runInTransaction</a></span>(java.util.function.Function&lt;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.InTransactionContext</a>,T&gt;&nbsp;callable,
                java.lang.String&nbsp;tagName)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#tableExists--">tableExists</a></span>()</code>
<div class="block">Checks whether the metadata table already exists in the database.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>com.google.cloud.Timestamp</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#updateToFinished-java.lang.String-">updateToFinished</a></span>(java.lang.String&nbsp;partitionToken)</code>
<div class="block">Updates a partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#FINISHED"><code>PartitionMetadata.State.FINISHED</code></a> state.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>com.google.cloud.Timestamp</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#updateToRunning-java.lang.String-">updateToRunning</a></span>(java.lang.String&nbsp;partitionToken)</code>
<div class="block">Updates a partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#RUNNING"><code>PartitionMetadata.State.RUNNING</code></a> state.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>com.google.cloud.Timestamp</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#updateToScheduled-java.util.List-">updateToScheduled</a></span>(java.util.List&lt;java.lang.String&gt;&nbsp;partitionTokens)</code>
<div class="block">Updates multiple partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#SCHEDULED"><code>PartitionMetadata.State.SCHEDULED</code></a> state.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html#updateWatermark-java.lang.String-com.google.cloud.Timestamp-">updateWatermark</a></span>(java.lang.String&nbsp;partitionToken,
               com.google.cloud.Timestamp&nbsp;watermark)</code>
<div class="block">Update the partition watermark to the given timestamp.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="tableExists--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tableExists</h4>
<pre>public&nbsp;boolean&nbsp;tableExists()</pre>
<div class="block">Checks whether the metadata table already exists in the database.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the table exists, false if the table does not exist.</dd>
</dl>
</li>
</ul>
<a name="getPartition-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartition</h4>
<pre><a href="https://static.javadoc.io/com.google.code.findbugs/jsr305/3.0.2/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
public&nbsp;com.google.cloud.spanner.Struct&nbsp;getPartition(java.lang.String&nbsp;partitionToken)</pre>
<div class="block">Fetches the partition metadata row data for the given partition token.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionToken</code> - the partition unique identifier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the partition metadata for the given token if it exists as a struct. Otherwise, it
     returns null.</dd>
</dl>
</li>
</ul>
<a name="getUnfinishedMinWatermark--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnfinishedMinWatermark</h4>
<pre><a href="https://static.javadoc.io/com.google.code.findbugs/jsr305/3.0.2/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
public&nbsp;com.google.cloud.Timestamp&nbsp;getUnfinishedMinWatermark()</pre>
<div class="block">Fetches the earliest partition watermark from the partition metadata table that is not in a
 <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#FINISHED"><code>PartitionMetadata.State.FINISHED</code></a> state.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the earliest partition watermark which is not in a <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#FINISHED"><code>PartitionMetadata.State.FINISHED</code></a> state.</dd>
</dl>
</li>
</ul>
<a name="getAllPartitionsCreatedAfter-com.google.cloud.Timestamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllPartitionsCreatedAfter</h4>
<pre>public&nbsp;com.google.cloud.spanner.ResultSet&nbsp;getAllPartitionsCreatedAfter(com.google.cloud.Timestamp&nbsp;timestamp)</pre>
<div class="block">Fetches all partitions with a <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_CREATED_AT"><code>PartitionMetadataAdminDao.COLUMN_CREATED_AT</code></a> less than the
 given timestamp. The results are ordered by the <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_CREATED_AT"><code>PartitionMetadataAdminDao.COLUMN_CREATED_AT</code></a> and <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_START_TIMESTAMP"><code>PartitionMetadataAdminDao.COLUMN_START_TIMESTAMP</code></a> columns in ascending order.</div>
</li>
</ul>
<a name="countPartitionsCreatedAfter-com.google.cloud.Timestamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countPartitionsCreatedAfter</h4>
<pre>public&nbsp;long&nbsp;countPartitionsCreatedAfter(com.google.cloud.Timestamp&nbsp;timestamp)</pre>
<div class="block">Counts all partitions with a <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html#COLUMN_CREATED_AT"><code>PartitionMetadataAdminDao.COLUMN_CREATED_AT</code></a> less than the
 given timestamp.</div>
</li>
</ul>
<a name="insert-org.apache.beam.sdk.io.gcp.spanner.changestreams.model.PartitionMetadata-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>public&nbsp;com.google.cloud.Timestamp&nbsp;insert(<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.model">PartitionMetadata</a>&nbsp;row)</pre>
<div class="block">Inserts the partition metadata.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - the partition metadata to be inserted</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the commit timestamp of the read / write transaction</dd>
</dl>
</li>
</ul>
<a name="updateToScheduled-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateToScheduled</h4>
<pre>public&nbsp;com.google.cloud.Timestamp&nbsp;updateToScheduled(java.util.List&lt;java.lang.String&gt;&nbsp;partitionTokens)</pre>
<div class="block">Updates multiple partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#SCHEDULED"><code>PartitionMetadata.State.SCHEDULED</code></a> state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionTokens</code> - the partitions' unique identifiers</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the commit timestamp of the read / write transaction</dd>
</dl>
</li>
</ul>
<a name="updateToRunning-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateToRunning</h4>
<pre>public&nbsp;com.google.cloud.Timestamp&nbsp;updateToRunning(java.lang.String&nbsp;partitionToken)</pre>
<div class="block">Updates a partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#RUNNING"><code>PartitionMetadata.State.RUNNING</code></a> state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionToken</code> - the partition unique identifier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the commit timestamp of the read / write transaction</dd>
</dl>
</li>
</ul>
<a name="updateToFinished-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateToFinished</h4>
<pre>public&nbsp;com.google.cloud.Timestamp&nbsp;updateToFinished(java.lang.String&nbsp;partitionToken)</pre>
<div class="block">Updates a partition row to <a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/model/PartitionMetadata.State.html#FINISHED"><code>PartitionMetadata.State.FINISHED</code></a> state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionToken</code> - the partition unique identifier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the commit timestamp of the read / write transaction</dd>
</dl>
</li>
</ul>
<a name="updateWatermark-java.lang.String-com.google.cloud.Timestamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateWatermark</h4>
<pre>public&nbsp;void&nbsp;updateWatermark(java.lang.String&nbsp;partitionToken,
                            com.google.cloud.Timestamp&nbsp;watermark)</pre>
<div class="block">Update the partition watermark to the given timestamp.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionToken</code> - the partition unique identifier</dd>
<dd><code>watermark</code> - the new partition watermark</dd>
</dl>
</li>
</ul>
<a name="runInTransaction-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runInTransaction</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.TransactionResult</a>&lt;T&gt;&nbsp;runInTransaction(java.util.function.Function&lt;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.InTransactionContext</a>,T&gt;&nbsp;callable)</pre>
<div class="block">Runs a given function in a transaction context. The transaction object is given as the
 parameter to the input function. If the function returns successfully, it will be committed. If
 the function throws an exception it will be rolled back.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the return type to be returned from the input transactional function</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>callable</code> - the function to be executed within the transaction context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a transaction result containing the result from the function and a commit timestamp for
     the read / write transaction</dd>
</dl>
</li>
</ul>
<a name="runInTransaction-java.util.function.Function-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>runInTransaction</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.TransactionResult.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.TransactionResult</a>&lt;T&gt;&nbsp;runInTransaction(java.util.function.Function&lt;<a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao">PartitionMetadataDao.InTransactionContext</a>,T&gt;&nbsp;callable,
                                                                      java.lang.String&nbsp;tagName)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataAdminDao.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../../org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.InTransactionContext.html" title="class in org.apache.beam.sdk.io.gcp.spanner.changestreams.dao"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../../index.html?org/apache/beam/sdk/io/gcp/spanner/changestreams/dao/PartitionMetadataDao.html" target="_top">Frames</a></li>
<li><a href="PartitionMetadataDao.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>apache_beam.yaml.yaml_io module &mdash; Apache Beam 2.58.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="apache_beam.yaml.yaml_join module" href="apache_beam.yaml.yaml_join.html" />
    <link rel="prev" title="apache_beam.yaml.yaml_combine module" href="apache_beam.yaml.yaml_combine.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Apache Beam
          

          
          </a>

          
            
            
              <div class="version">
                2.58.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="apache_beam.coders.html">apache_beam.coders package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.dataframe.html">apache_beam.dataframe package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.io.html">apache_beam.io package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.metrics.html">apache_beam.metrics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.ml.html">apache_beam.ml package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.options.html">apache_beam.options package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.portability.html">apache_beam.portability package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.runners.html">apache_beam.runners package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.testing.html">apache_beam.testing package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.transforms.html">apache_beam.transforms package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.typehints.html">apache_beam.typehints package</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.utils.html">apache_beam.utils package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="apache_beam.yaml.html">apache_beam.yaml package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="apache_beam.yaml.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.cache_provider_artifacts.html">apache_beam.yaml.cache_provider_artifacts module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.generate_yaml_docs.html">apache_beam.yaml.generate_yaml_docs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.json_utils.html">apache_beam.yaml.json_utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.main.html">apache_beam.yaml.main module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.options.html">apache_beam.yaml.options module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_combine.html">apache_beam.yaml.yaml_combine module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">apache_beam.yaml.yaml_io module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_join.html">apache_beam.yaml.yaml_join module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_mapping.html">apache_beam.yaml.yaml_mapping module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_ml.html">apache_beam.yaml.yaml_ml module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_provider.html">apache_beam.yaml.yaml_provider module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache_beam.yaml.yaml_transform.html">apache_beam.yaml.yaml_transform module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.error.html">apache_beam.error module</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.pipeline.html">apache_beam.pipeline module</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_beam.pvalue.html">apache_beam.pvalue module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apache Beam</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="apache_beam.yaml.html">apache_beam.yaml package</a> &raquo;</li>
        
      <li>apache_beam.yaml.yaml_io module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/apache_beam.yaml.yaml_io.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-apache_beam.yaml.yaml_io">
<span id="apache-beam-yaml-yaml-io-module"></span><h1>apache_beam.yaml.yaml_io module<a class="headerlink" href="#module-apache_beam.yaml.yaml_io" title="Permalink to this headline">¶</a></h1>
<p>This module contains the Python implementations for the builtin IOs.</p>
<p>They are referenced from standard_io.py.</p>
<p>Note that in the case that they overlap with other (likely Java)
implementations of the same transforms, the configs must be kept in sync.</p>
<dl class="function">
<dt id="apache_beam.yaml.yaml_io.read_from_text">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">read_from_text</code><span class="sig-paren">(</span><em>path: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#read_from_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.read_from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads lines from a text files.</p>
<p>The resulting PCollection consists of rows with a single string filed named
“line.”</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The file path to read from.  The path can contain glob
characters such as <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.write_to_text">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">write_to_text</code><span class="sig-paren">(</span><em>path: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#write_to_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.write_to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a PCollection to a (set of) text files(s).</p>
<p>The input must be a PCollection whose schema has exactly one field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The file path to write to. The files written will
begin with this prefix, followed by a shard identifier.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.read_from_bigquery">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">read_from_bigquery</code><span class="sig-paren">(</span><em>*</em>, <em>table: Optional[str] = None</em>, <em>query: Optional[str] = None</em>, <em>row_restriction: Optional[str] = None</em>, <em>fields: Optional[Iterable[str]] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#read_from_bigquery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.read_from_bigquery" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads data from BigQuery.</p>
<p>Exactly one of table or query must be set.
If query is set, neither row_restriction nor fields should be set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The table to read from, specified as <cite>DATASET.TABLE</cite>
or <cite>PROJECT:DATASET.TABLE</cite>.</li>
<li><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A query to be used instead of the table argument.</li>
<li><strong>row_restriction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Optional SQL text filtering statement, similar to a
WHERE clause in a query. Aggregates are not supported. Restricted to a
maximum length for 1 MB.</li>
<li><strong>selected_fields</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>]</em>) – Optional List of names of the fields in the
table that should be read. If empty, all fields will be read. If the
specified field is a nested field, all the sub-fields in the field will be
selected. The output field order is unrelated to the order of fields
given here.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.write_to_bigquery">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">write_to_bigquery</code><span class="sig-paren">(</span><em>table: str</em>, <em>*</em>, <em>create_disposition: Optional[str] = 'CREATE_IF_NEEDED'</em>, <em>write_disposition: Optional[str] = 'WRITE_APPEND'</em>, <em>error_handling=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#write_to_bigquery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.write_to_bigquery" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.read_from_pubsub">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">read_from_pubsub</code><span class="sig-paren">(</span><em>*</em>, <em>topic: Optional[str] = None</em>, <em>subscription: Optional[str] = None</em>, <em>format: str</em>, <em>schema: Optional[Any] = None</em>, <em>attributes: Optional[Iterable[str]] = None</em>, <em>attributes_map: Optional[str] = None</em>, <em>id_attribute: Optional[str] = None</em>, <em>timestamp_attribute: Optional[str] = None</em>, <em>error_handling: apache_beam.yaml.yaml_mapping.ErrorHandlingConfig = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#read_from_pubsub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.read_from_pubsub" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads messages from Cloud Pub/Sub.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>topic</strong> – Cloud Pub/Sub topic in the form
“projects/&lt;project&gt;/topics/&lt;topic&gt;”. If provided, subscription must be
None.</li>
<li><strong>subscription</strong> – Existing Cloud Pub/Sub subscription to use in the
form “projects/&lt;project&gt;/subscriptions/&lt;subscription&gt;”. If not
specified, a temporary subscription will be created from the specified
topic. If provided, topic must be None.</li>
<li><strong>format</strong> – <p>The expected format of the message payload.  Currently suported
formats are</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>RAW: Produces records with a single <cite>payload</cite> field whose contents</dt>
<dd>are the raw bytes of the pubsub message.</dd>
</dl>
</li>
<li>AVRO: Parses records with a given Avro schema.</li>
<li>JSON: Parses records with a given JSON schema.</li>
</ul>
</div></blockquote>
</li>
<li><strong>schema</strong> – Schema specification for the given format.</li>
<li><strong>attributes</strong> – List of attribute keys whose values will be flattened into the
output message as additional fields.  For example, if the format is <cite>raw</cite>
and attributes is <cite>[“a”, “b”]</cite> then this read will produce elements of
the form <cite>Row(payload=…, a=…, b=…)</cite>.</li>
<li><strong>attribute_map</strong> – Name of a field in which to store the full set of attributes
associated with this message.  For example, if the format is <cite>raw</cite> and
<cite>attribute_map</cite> is set to <cite>“attrs”</cite> then this read will produce elements
of the form <cite>Row(payload=…, attrs=…)</cite> where <cite>attrs</cite> is a Map type
of string to string.
If both <cite>attributes</cite> and <cite>attribute_map</cite> are set, the overlapping
attribute values will be present in both the flattened structure and the
attribute map.</li>
<li><strong>id_attribute</strong> – The attribute on incoming Pub/Sub messages to use as a unique
record identifier. When specified, the value of this attribute (which
can be any string that uniquely identifies the record) will be used for
deduplication of messages. If not provided, we cannot guarantee
that no duplicate data will be delivered on the Pub/Sub stream. In this
case, deduplication of the stream will be strictly best effort.</li>
<li><strong>timestamp_attribute</strong> – <p>Message value to use as element timestamp. If None,
uses message publishing time as the timestamp.</p>
<p>Timestamp values should be in one of two formats:</p>
<ul>
<li>A numerical value representing the number of milliseconds since the
Unix epoch.</li>
<li>A string in RFC 3339 format, UTC timezone. Example:
<code class="docutils literal notranslate"><span class="pre">2015-10-29T23:41:41.123Z</span></code>. The sub-second component of the
timestamp is optional, and digits beyond the first three (i.e., time
units smaller than milliseconds) may be ignored.</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.write_to_pubsub">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">write_to_pubsub</code><span class="sig-paren">(</span><em>*</em>, <em>topic: str</em>, <em>format: str</em>, <em>schema: Optional[Any] = None</em>, <em>attributes: Optional[Iterable[str]] = None</em>, <em>attributes_map: Optional[str] = None</em>, <em>id_attribute: Optional[str] = None</em>, <em>timestamp_attribute: Optional[str] = None</em>, <em>error_handling: apache_beam.yaml.yaml_mapping.ErrorHandlingConfig = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#write_to_pubsub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.write_to_pubsub" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes messages to Cloud Pub/Sub.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>topic</strong> – Cloud Pub/Sub topic in the form “/topics/&lt;project&gt;/&lt;topic&gt;”.</li>
<li><strong>format</strong> – <p>How to format the message payload.  Currently suported
formats are</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>RAW: Expects a message with a single field (excluding</dt>
<dd>attribute-related fields) whose contents are used as the raw bytes
of the pubsub message.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AVRO: Encodes records with a given Avro schema, which may be inferred</dt>
<dd>from the input PCollection schema.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>JSON: Formats records with a given JSON schema, which may be inferred</dt>
<dd>from the input PCollection schema.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><strong>schema</strong> – Schema specification for the given format.</li>
<li><strong>attributes</strong> – List of attribute keys whose values will be pulled out as
PubSub message attributes.  For example, if the format is <cite>raw</cite>
and attributes is <cite>[“a”, “b”]</cite> then elements of the form
<cite>Row(any_field=…, a=…, b=…)</cite> will result in PubSub messages whose
payload has the contents of any_field and whose attribute will be
populated with the values of <cite>a</cite> and <cite>b</cite>.</li>
<li><strong>attribute_map</strong> – Name of a string-to-string map field in which to pull a set
of attributes associated with this message.  For example, if the format
is <cite>raw</cite> and <cite>attribute_map</cite> is set to <cite>“attrs”</cite> then elements of the form
<cite>Row(any_field=…, attrs=…)</cite> will result in PubSub messages whose
payload has the contents of any_field and whose attribute will be
populated with the values from attrs.
If both <cite>attributes</cite> and <cite>attribute_map</cite> are set, the union of attributes
from these two sources will be used to populate the PubSub message
attributes.</li>
<li><strong>id_attribute</strong> – If set, will set an attribute for each Cloud Pub/Sub message
with the given name and a unique value. This attribute can then be used
in a ReadFromPubSub PTransform to deduplicate messages.</li>
<li><strong>timestamp_attribute</strong> – If set, will set an attribute for each Cloud Pub/Sub
message with the given name and the message’s publish time as the value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="apache_beam.yaml.yaml_io.io_providers">
<code class="descclassname">apache_beam.yaml.yaml_io.</code><code class="descname">io_providers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/apache_beam/yaml/yaml_io.html#io_providers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#apache_beam.yaml.yaml_io.io_providers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="apache_beam.yaml.yaml_join.html" class="btn btn-neutral float-right" title="apache_beam.yaml.yaml_join module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="apache_beam.yaml.yaml_combine.html" class="btn btn-neutral float-left" title="apache_beam.yaml.yaml_combine module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>